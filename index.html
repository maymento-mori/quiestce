<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qui est-ce? - Jeu 2 Joueurs</title>
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .dark-mode {
            background: linear-gradient(to bottom right, #1a1a2e, #16213e) !important;
        }
        .dark-mode .bg-white {
            background-color: #1f2937 !important;
            color: #f3f4f6 !important;
        }
        .dark-mode .text-gray-800 {
            color: #f3f4f6 !important;
        }
        .dark-mode .text-gray-700 {
            color: #d1d5db !important;
        }
        .dark-mode .text-gray-600 {
            color: #9ca3af !important;
        }
        .dark-mode .bg-gray-100 {
            background-color: #374151 !important;
        }
        .dark-mode .bg-gray-50 {
            background-color: #374151 !important;
        }
        .dark-mode .border-gray-300 {
            border-color: #4b5563 !important;
        }
        .dark-mode .bg-blue-50 {
            background-color: #1e3a5f !important;
        }
        .dark-mode .bg-pink-50 {
            background-color: #5f1e3a !important;
        }
        .dark-mode .bg-orange-100 {
            background-color: #7c3a1e !important;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icône Users
        const Users = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        // Icône RotateCcw
        const RotateCcw = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
            </svg>
        );

        // Icône Eye
        const Eye = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
        );

        // Icône Trophy
        const Trophy = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
        );

        // Icône Moon
        const Moon = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            </svg>
        );

        // Icône Sun
        const Sun = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        // Icône Undo
        const Undo = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
            </svg>
        );

        // Icône Clock
        const Clock = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        // Fonctions pour les sons
        const playSound = (frequency, duration) => {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch (e) {
                console.log('Audio not supported');
            }
        };

        const playEliminateSound = () => playSound(300, 0.1);
        const playVictorySound = () => {
            playSound(523, 0.15);
            setTimeout(() => playSound(659, 0.15), 150);
            setTimeout(() => playSound(784, 0.3), 300);
        };
        const playTimerSound = () => playSound(800, 0.2);

        const vibrate = (pattern) => {
            if (navigator.vibrate) {
                navigator.vibrate(pattern);
            }
        };

        const GuessWhoGame = () => {
            const [phase, setPhase] = useState('config');
            const [totalRounds, setTotalRounds] = useState(3);
            const [currentRound, setCurrentRound] = useState(1);
            const [player1Score, setPlayer1Score] = useState(0);
            const [player2Score, setPlayer2Score] = useState(0);
            const [player1Name, setPlayer1Name] = useState('');
            const [player2Name, setPlayer2Name] = useState('');
            const [darkMode, setDarkMode] = useState(false);
            const [timerEnabled, setTimerEnabled] = useState(false);
            const [timeLeft, setTimeLeft] = useState(120);
            const [lastElimination, setLastElimination] = useState(null);
            
            const [currentPlayer, setCurrentPlayer] = useState(1);
            const [nameInput, setNameInput] = useState('');
            const [allNames, setAllNames] = useState([]);
            const [player1Secret, setPlayer1Secret] = useState('');
            const [player2Secret, setPlayer2Secret] = useState('');
            const [error, setError] = useState('');
            const [eliminatedByP1, setEliminatedByP1] = useState([]);
            const [eliminatedByP2, setEliminatedByP2] = useState([]);
            const [gameCurrentPlayer, setGameCurrentPlayer] = useState(1);
            const [roundWinner, setRoundWinner] = useState(null);

            const timerRef = useRef(null);

            // Timer
            useEffect(() => {
                if (phase === 'game' && timerEnabled && timeLeft > 0) {
                    timerRef.current = setInterval(() => {
                        setTimeLeft(prev => {
                            if (prev <= 1) {
                                playTimerSound();
                                vibrate(200);
                                checkWinner();
                                return 120;
                            }
                            if (prev === 11) {
                                playTimerSound();
                            }
                            return prev - 1;
                        });
                    }, 1000);
                    return () => clearInterval(timerRef.current);
                }
            }, [phase, timerEnabled, timeLeft, gameCurrentPlayer]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins}:${secs.toString().padStart(2, '0')}`;
            };

            const startGame = () => {
                if (totalRounds < 1) {
                    setError('Choisissez au moins 1 partie');
                    return;
                }
                if (!player1Name.trim() || !player2Name.trim()) {
                    setError('Veuillez entrer les noms des deux joueurs');
                    return;
                }
                setPhase('setup');
                setError('');
            };

            const handleAddName = () => {
                const trimmedName = nameInput.trim();
                
                if (!trimmedName) {
                    setError('Veuillez entrer un prénom');
                    return;
                }

                if (allNames.includes(trimmedName.toLowerCase())) {
                    setError('Ce prénom a déjà été ajouté!');
                    setNameInput('');
                    return;
                }

                const newNames = [...allNames, trimmedName.toLowerCase()];
                setAllNames(newNames);
                setNameInput('');
                setError('');

                if (newNames.length < 20) {
                    setCurrentPlayer(currentPlayer === 1 ? 2 : 1);
                }

                if (newNames.length === 20) {
                    const shuffled = [...newNames].sort(() => Math.random() - 0.5);
                    setPlayer1Secret(shuffled[0]);
                    setPlayer2Secret(shuffled[1]);
                    setPhase('assignSecret');
                    setCurrentPlayer(1);
                }
            };

            const revealAndStartGame = (player) => {
                if (player === 1) {
                    setCurrentPlayer(2);
                } else {
                    setPhase('game');
                    setGameCurrentPlayer(1);
                }
            };

            const toggleEliminate = (name) => {
                playEliminateSound();
                vibrate(50);
                
                if (gameCurrentPlayer === 1) {
                    if (eliminatedByP1.includes(name)) {
                        setEliminatedByP1(eliminatedByP1.filter(n => n !== name));
                        setLastElimination(null);
                    } else {
                        setLastElimination({ player: 1, name });
                        setEliminatedByP1([...eliminatedByP1, name]);
                    }
                } else {
                    if (eliminatedByP2.includes(name)) {
                        setEliminatedByP2(eliminatedByP2.filter(n => n !== name));
                        setLastElimination(null);
                    } else {
                        setLastElimination({ player: 2, name });
                        setEliminatedByP2([...eliminatedByP2, name]);
                    }
                }
            };

            const undoLastElimination = () => {
                if (!lastElimination) return;
                
                playSound(400, 0.1);
                if (lastElimination.player === 1) {
                    setEliminatedByP1(eliminatedByP1.filter(n => n !== lastElimination.name));
                } else {
                    setEliminatedByP2(eliminatedByP2.filter(n => n !== lastElimination.name));
                }
                setLastElimination(null);
            };

            const checkWinner = () => {
                const p1Remaining = allNames.filter(name => !eliminatedByP1.includes(name));
                const p1Won = p1Remaining.length === 1 && p1Remaining[0] === player2Secret;
                const p1Wrong = p1Remaining.length === 1 && p1Remaining[0] !== player2Secret;

                const p2Remaining = allNames.filter(name => !eliminatedByP2.includes(name));
                const p2Won = p2Remaining.length === 1 && p2Remaining[0] === player1Secret;
                const p2Wrong = p2Remaining.length === 1 && p2Remaining[0] !== player1Secret;

                let winner = null;
                const resultMessage = `${player1Name || 'Joueur 1'} devait deviner "${player2Secret}" et ${player2Name || 'Joueur 2'} devait deviner "${player1Secret}"`;
                
                if (p1Wrong && p2Remaining.length > 1) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                } else if (p2Wrong && p1Remaining.length > 1) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p1Wrong && p2Wrong) {
                    winner = 'draw';
                    setError(resultMessage);
                } else if (p1Won && p2Won) {
                    winner = 'draw';
                    setError(resultMessage);
                } else if (p1Won && p2Remaining.length > 1) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p2Won && p1Remaining.length > 1) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                } else if (p1Won) {
                    setPlayer1Score(player1Score + 1);
                    winner = 1;
                    setError(resultMessage);
                } else if (p2Won) {
                    setPlayer2Score(player2Score + 1);
                    winner = 2;
                    setError(resultMessage);
                }

                if (winner) {
                    playVictorySound();
                    vibrate([200, 100, 200]);
                    setRoundWinner(winner);
                    setPhase('roundEnd');
                    setTimeLeft(120);
                    clearInterval(timerRef.current);
                } else {
                    setGameCurrentPlayer(gameCurrentPlayer === 1 ? 2 : 1);
                    setTimeLeft(120);
                    setLastElimination(null);
                }
            };

            const nextRound = () => {
                if (currentRound < totalRounds) {
                    setCurrentRound(currentRound + 1);
                    
                    // Réutiliser les mêmes prénoms
                    const shuffled = [...allNames].sort(() => Math.random() - 0.5);
                    setPlayer1Secret(shuffled[0]);
                    setPlayer2Secret(shuffled[1]);
                    setPhase('assignSecret');
                    setCurrentPlayer(1);
                    
                    setEliminatedByP1([]);
                    setEliminatedByP2([]);
                    setGameCurrentPlayer(1);
                    setRoundWinner(null);
                    setError('');
                    setTimeLeft(120);
                    setLastElimination(null);
                } else {
                    setPhase('gameEnd');
                    playVictorySound();
                    vibrate([300, 100, 300, 100, 300]);
                }
            };

            const reset = () => {
                setPhase('config');
                setTotalRounds(3);
                setCurrentRound(1);
                setPlayer1Score(0);
                setPlayer2Score(0);
                setPlayer1Name('');
                setPlayer2Name('');
                setCurrentPlayer(1);
                setNameInput('');
                setAllNames([]);
                setPlayer1Secret('');
                setPlayer2Secret('');
                setError('');
                setEliminatedByP1([]);
                setEliminatedByP2([]);
                setGameCurrentPlayer(1);
                setRoundWinner(null);
                setTimeLeft(120);
                setLastElimination(null);
                clearInterval(timerRef.current);
            };

            return (
                <div className={`min-h-screen p-4 ${darkMode ? 'dark-mode' : 'bg-gradient-to-br from-purple-500 to-pink-500'}`}>
                    <div className="max-w-2xl mx-auto">
                        
                        {/* Bouton mode sombre - toujours visible */}
                        <button
                            onClick={() => setDarkMode(!darkMode)}
                            className="fixed top-4 right-4 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg hover:scale-110 transition-transform z-50"
                        >
                            {darkMode ? <Sun className="w-6 h-6 text-yellow-400" /> : <Moon className="w-6 h-6 text-gray-700" />}
                        </button>
                        
                        {phase === 'config' && (
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <div className="text-center mb-8">
                                    <Users className="w-16 h-16 mx-auto mb-4 text-purple-600" />
                                    <h1 className="text-4xl font-bold text-gray-800 mb-2">Qui est-ce?</h1>
                                    <p className="text-gray-600">Jeu à 2 joueurs</p>
                                </div>

                                <div className="space-y-6">
                                    <div>
                                        <label className="block text-lg font-medium text-gray-700 mb-3">
                                            Nom du Joueur 1
                                        </label>
                                        <input
                                            type="text"
                                            value={player1Name}
                                            onChange={(e) => setPlayer1Name(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-blue-300 rounded-lg focus:border-blue-500 focus:outline-none text-xl text-center font-semibold"
                                            placeholder="Ex: Alice"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-lg font-medium text-gray-700 mb-3">
                                            Nom du Joueur 2
                                        </label>
                                        <input
                                            type="text"
                                            value={player2Name}
                                            onChange={(e) => setPlayer2Name(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-pink-300 rounded-lg focus:border-pink-500 focus:outline-none text-xl text-center font-semibold"
                                            placeholder="Ex: Bob"
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-lg font-medium text-gray-700 mb-3">
                                            Combien de manches voulez-vous jouer ?
                                        </label>
                                        <input
                                            type="number"
                                            min="1"
                                            max="10"
                                            value={totalRounds}
                                            onChange={(e) => setTotalRounds(parseInt(e.target.value) || 1)}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-2xl text-center font-bold"
                                        />
                                    </div>

                                    <div className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                        <div className="flex items-center gap-3">
                                            <Clock className="w-6 h-6 text-gray-600" />
                                            <span className="font-medium text-gray-700">Timer (2 min par tour)</span>
                                        </div>
                                        <button
                                            onClick={() => setTimerEnabled(!timerEnabled)}
                                            className={`px-6 py-2 rounded-lg font-bold transition-all ${
                                                timerEnabled 
                                                ? 'bg-green-500 text-white' 
                                                : 'bg-gray-300 text-gray-600'
                                            }`}
                                        >
                                            {timerEnabled ? 'ON' : 'OFF'}
                                        </button>
                                    </div>

                                    {error && (
                                        <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded">
                                            {error}
                                        </div>
                                    )}

                                    <button
                                        onClick={startGame}
                                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg font-bold text-xl hover:from-purple-700 hover:to-pink-700 transition-all"
                                    >
                                        Commencer la partie
                                    </button>
                                </div>
                            </div>
                        )}

                        {phase !== 'config' && phase !== 'gameEnd' && (
                            <div className="bg-white rounded-xl shadow-lg p-4 mb-4">
                                <div className="flex justify-between items-center">
                                    <div className="text-center flex-1">
                                        <p className="text-sm text-gray-600">{player1Name || 'Joueur 1'}</p>
                                        <p className="text-3xl font-bold text-blue-600">{player1Score}</p>
                                    </div>
                                    <div className="text-center flex-1">
                                        <p className="text-lg font-bold text-gray-700">Manche {currentRound}/{totalRounds}</p>
                                    </div>
                                    <div className="text-center flex-1">
                                        <p className="text-sm text-gray-600">{player2Name || 'Joueur 2'}</p>
                                        <p className="text-3xl font-bold text-pink-600">{player2Score}</p>
                                    </div>
                                </div>
                            </div>
                        )}
                        
                        {phase === 'setup' && (
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <div className="text-center mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-2">Manche {currentRound}</h2>
                                    <p className="text-gray-600">Ajoutez 20 prénoms</p>
                                </div>

                                <div className="mb-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <span className="text-lg font-semibold text-gray-700">
                                            Progression: {allNames.length}/20 prénoms
                                        </span>
                                        <span className={`px-4 py-2 rounded-full font-bold ${
                                            currentPlayer === 1 ? 'bg-blue-500 text-white' : 'bg-pink-500 text-white'
                                        }`}>
                                            {currentPlayer === 1 ? player1Name || 'Joueur 1' : player2Name || 'Joueur 2'}
                                        </span>
                                    </div>
                                    
                                    <div className="w-full bg-gray-200 rounded-full h-3 mb-6">
                                        <div 
                                            className="bg-gradient-to-r from-blue-500 to-pink-500 h-3 rounded-full transition-all duration-300"
                                            style={{ width: `${(allNames.length / 20) * 100}%` }}
                                        />
                                    </div>
                                </div>

                                <div className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Entrez un prénom que vous connaissez tous les deux:
                                        </label>
                                        <input
                                            type="text"
                                            value={nameInput}
                                            onChange={(e) => setNameInput(e.target.value)}
                                            onKeyPress={(e) => e.key === 'Enter' && handleAddName()}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-lg"
                                            placeholder="Ex: Marie, Thomas..."
                                            autoFocus
                                        />
                                    </div>

                                    {error && (
                                        <div className="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded">
                                            {error}
                                        </div>
                                    )}

                                    <button
                                        onClick={handleAddName}
                                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-bold text-lg hover:from-purple-700 hover:to-pink-700 transition-all"
                                    >
                                        Ajouter le prénom
                                    </button>
                                </div>

                                {allNames.length > 0 && (
                                    <div className="mt-6">
                                        <h3 className="font-semibold text-gray-700 mb-3">Prénoms ajoutés:</h3>
                                        <div className="grid grid-cols-2 gap-2 max-h-48 overflow-y-auto">
                                            {allNames.map((name, idx) => (
                                                <div key={idx} className="bg-gray-100 px-3 py-2 rounded-lg capitalize text-sm">
                                                    {name}
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {phase === 'assignSecret' && (
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <div className="text-center mb-8">
                                    <Eye className="w-16 h-16 mx-auto mb-4 text-purple-600" />
                                    <h1 className="text-3xl font-bold text-gray-800 mb-2">Attribution des personnages</h1>
                                    <p className="text-gray-600">Chaque joueur doit voir son personnage secret</p>
                                </div>

                                {currentPlayer === 1 && (
                                    <div className="space-y-6">
                                        <div className="bg-blue-50 border-4 border-blue-500 rounded-2xl p-8 text-center">
                                            <h2 className="text-2xl font-bold text-blue-600 mb-4">{player1Name || 'Joueur 1'}</h2>
                                            <p className="text-gray-700 mb-4">Ton personnage secret (que {player2Name || 'le Joueur 2'} doit deviner) :</p>
                                            <p className="text-5xl font-bold text-blue-600 capitalize mb-6">{player1Secret}</p>
                                            <p className="text-sm text-gray-600 mb-6">Mémorise-le bien !</p>
                                            <button
                                                onClick={() => revealAndStartGame(1)}
                                                className="px-8 py-3 bg-blue-500 text-white rounded-lg font-bold text-lg hover:bg-blue-600 transition-all"
                                            >
                                                J'ai mémorisé - Passer à {player2Name || 'Joueur 2'}
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {currentPlayer === 2 && (
                                    <div className="space-y-6 transform rotate-180">
                                        <div className="bg-pink-50 border-4 border-pink-500 rounded-2xl p-8 text-center">
                                            <h2 className="text-2xl font-bold text-pink-600 mb-4">{player2Name || 'Joueur 2'}</h2>
                                            <p className="text-gray-700 mb-4">Ton personnage secret (que {player1Name || 'le Joueur 1'} doit deviner) :</p>
                                            <p className="text-5xl font-bold text-pink-600 capitalize mb-6">{player2Secret}</p>
                                            <p className="text-sm text-gray-600 mb-6">Mémorise-le bien !</p>
                                            <button
                                                onClick={() => revealAndStartGame(2)}
                                                className="px-8 py-3 bg-pink-500 text-white rounded-lg font-bold text-lg hover:bg-pink-600 transition-all"
                                            >
                                                J'ai mémorisé - Commencer le jeu
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {phase === 'game' && (
                            <div className={`bg-white rounded-2xl shadow-2xl p-8 transition-all duration-500 ${
                                gameCurrentPlayer === 2 ? 'transform rotate-180' : ''
                            }`}>
                                <div className="text-center mb-6">
                                    <div className="flex justify-between items-center mb-4">
                                        <button
                                            onClick={reset}
                                            className="inline-flex items-center gap-2 px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors"
                                        >
                                            <RotateCcw className="w-4 h-4" />
                                            Recommencer
                                        </button>
                                        <h2 className={`text-2xl font-bold ${
                                            gameCurrentPlayer === 1 ? 'text-blue-600' : 'text-pink-600'
                                        }`}>
                                            Tour de {gameCurrentPlayer === 1 ? (player1Name || 'Joueur 1') : (player2Name || 'Joueur 2')}
                                        </h2>
                                    </div>
                                    
                                    {timerEnabled && (
                                        <div className={`text-4xl font-bold mb-4 ${timeLeft <= 10 ? 'text-red-600 animate-pulse' : 'text-gray-700'}`}>
                                            <Clock className="w-8 h-8 inline mr-2" />
                                            {formatTime(timeLeft)}
                                        </div>
                                    )}
                                    
                                    <p className="text-gray-600 mb-4">Clique sur les personnages pour les éliminer</p>
                                    
                                    {lastElimination && lastElimination.player === gameCurrentPlayer && (
                                        <button
                                            onClick={undoLastElimination}
                                            className="inline-flex items-center gap-2 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors mb-4"
                                        >
                                            <Undo className="w-4 h-4" />
                                            Annuler "{lastElimination.name}"
                                        </button>
                                    )}
                                </div>

                                <div className="grid grid-cols-3 gap-3 mb-6">
                                    {allNames.map((name, idx) => {
                                        const isEliminated = gameCurrentPlayer === 1 
                                            ? eliminatedByP1.includes(name)
                                            : eliminatedByP2.includes(name);
                                        
                                        return (
                                            <button
                                                key={idx}
                                                onClick={() => toggleEliminate(name)}
                                                className={`px-4 py-3 rounded-lg font-medium capitalize transition-all ${
                                                    isEliminated
                                                        ? 'bg-gray-300 text-gray-500 line-through opacity-50'
                                                        : gameCurrentPlayer === 1
                                                        ? 'bg-blue-100 text-blue-800 hover:bg-blue-200 border-2 border-blue-300'
                                                        : 'bg-pink-100 text-pink-800 hover:bg-pink-200 border-2 border-pink-300'
                                                }`}
                                            >
                                                {name}
                                            </button>
                                        );
                                    })}
                                </div>

                                <div className="bg-gray-50 rounded-lg p-4 mb-6">
                                    <div className="flex justify-around text-center">
                                        <div>
                                            <p className="text-2xl font-bold text-gray-800">
                                                {gameCurrentPlayer === 1 
                                                    ? allNames.length - eliminatedByP1.length
                                                    : allNames.length - eliminatedByP2.length
                                                }
                                            </p>
                                            <p className="text-sm text-gray-600">Personnages restants</p>
                                        </div>
                                        <div>
                                            <p className="text-2xl font-bold text-gray-800">
                                                {gameCurrentPlayer === 1 ? eliminatedByP1.length : eliminatedByP2.length}
                                            </p>
                                            <p className="text-sm text-gray-600">Éliminés</p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    onClick={checkWinner}
                                    className={`w-full py-4 rounded-lg font-bold text-lg text-white transition-all ${
                                        gameCurrentPlayer === 1
                                            ? 'bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800'
                                            : 'bg-gradient-to-r from-pink-600 to-pink-700 hover:from-pink-700 hover:to-pink-800'
                                    }`}
                                >
                                    Terminer mon tour
                                </button>
                            </div>
                        )}

                        {phase === 'roundEnd' && (
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <div className="text-center mb-8">
                                    <Trophy className="w-20 h-20 mx-auto mb-4 text-yellow-500" />
                                    <h1 className="text-4xl font-bold text-gray-800 mb-4">Fin de la manche {currentRound}</h1>
                                    
                                    {error && (
                                        <div className="bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-4 rounded mb-4">
                                            {error}
                                        </div>
                                    )}
                                    
                                    {roundWinner === 'draw' && !error && (
                                        <p className="text-2xl text-gray-600">Égalité ! Pas de point</p>
                                    )}
                                    {roundWinner === 1 && (
                                        <div>
                                            <p className="text-2xl text-blue-600 font-bold mb-2">🎉 {player1Name || 'Le Joueur 1'} gagne ! 🎉</p>
                                        </div>
                                    )}
                                    {roundWinner === 2 && (
                                        <div>
                                            <p className="text-2xl text-pink-600 font-bold mb-2">🎉 {player2Name || 'Le Joueur 2'} gagne ! 🎉</p>
                                        </div>
                                    )}
                                </div>

                                <div className="bg-gray-50 rounded-xl p-6 mb-8">
                                    <h3 className="text-xl font-bold text-gray-700 mb-4 text-center">Score actuel</h3>
                                    <div className="flex justify-around">
                                        <div className="text-center">
                                            <p className="text-sm text-gray-600 mb-2">{player1Name || 'Joueur 1'}</p>
                                            <p className="text-5xl font-bold text-blue-600">{player1Score}</p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-sm text-gray-600 mb-2">{player2Name || 'Joueur 2'}</p>
                                            <p className="text-5xl font-bold text-pink-600">{player2Score}</p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    onClick={nextRound}
                                    className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg font-bold text-xl hover:from-purple-700 hover:to-pink-700 transition-all"
                                >
                                    {currentRound < totalRounds ? 'Manche suivante' : 'Voir les résultats finaux'}
                                </button>
                            </div>
                        )}

                        {phase === 'gameEnd' && (
                            <div className="bg-white rounded-2xl shadow-2xl p-8">
                                <div className="text-center mb-8">
                                    <Trophy className="w-24 h-24 mx-auto mb-4 text-yellow-500" />
                                    <h1 className="text-4xl font-bold text-gray-800 mb-4">Partie terminée !</h1>
                                    
                                    {player1Score > player2Score && (
                                        <p className="text-3xl font-bold text-blue-600 mb-2">🎉 {player1Name || 'Le Joueur 1'} remporte la partie ! 🎉</p>
                                    )}
                                    {player2Score > player1Score && (
                                        <p className="text-3xl font-bold text-pink-600 mb-2">🎉 {player2Name || 'Le Joueur 2'} remporte la partie ! 🎉</p>
                                    )}
                                    {player1Score === player2Score && (
                                        <p className="text-3xl font-bold text-gray-700 mb-2">🤝 Égalité parfaite ! 🤝</p>
                                    )}
                                </div>

                                <div className="bg-gradient-to-r from-blue-50 to-pink-50 rounded-xl p-8 mb-8">
                                    <h3 className="text-2xl font-bold text-gray-700 mb-6 text-center">Score final</h3>
                                    <div className="flex justify-around">
                                        <div className="text-center">
                                            <p className="text-lg text-gray-600 mb-2">{player1Name || 'Joueur 1'}</p>
                                            <p className="text-6xl font-bold text-blue-600">{player1Score}</p>
                                        </div>
                                        <div className="text-center">
                                            <p className="text-lg text-gray-600 mb-2">{player2Name || 'Joueur 2'}</p>
                                            <p className="text-6xl font-bold text-pink-600">{player2Score}</p>
                                        </div>
                                    </div>
                                </div>

                                <button
                                    onClick={reset}
                                    className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg font-bold text-xl hover:from-purple-700 hover:to-pink-700 transition-all"
                                >
                                    Nouvelle partie
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GuessWhoGame />, document.getElementById('root'));
    </script>
</body>
</html>